##習慣與公約
Author: Kit Law < kitlaw23 [at] gmail [dot] com >
Date: 2016/07/27
###超新手向散文集．除錯篇

這散文集一向都沒有固定路線，但離不開除錯這兩個字。今天就想討論一下習慣和程式碼公約(Code Convention)。為什麼要定下標準呢？ 語法不是標準嗎？ 事實上標準只是一個標準，不理會不導致程式死翹翹。相反，語法就是一子錯，滿盤皆落索，亦是最基礎的基本功。語法雖重要，但寫程式不能只是為了讓程式能動，還要有更深層次的考慮，例如有可讀性(Readability)、可維護性(Maintainability)、程式碼重用性(Code Reusability)、安全性(Security)、擴展性(Extensibility)　等等。這些東西每項都可以成為日後探討的主題。本文要談的公約，就是為了`可讀性`和`可維護性`而生，除此之外也可減少寫錯的機會，讓你的肝臟健康一點。

###甚麼是程式碼公約
公約是指一些大家公認的編程風格，避免不必要的錯誤。除了減少犯上低級錯誤外，大家使用相同的標準就像有了共通語言，減少語言不通造成的「誤會」，讓大家合作愉快。

對應不同的語言，我們有不同的標準程式碼公約，如HTML裡span 裡面不應有div、能按的就給我用button。在語法規範比較寛鬆的弱型態語言(Weakly-typed / Loosely-typed Language)標準會定得更嚴謹，也相對較為重要。例如 [`jsLint`](http://www.jslint.com/help.html) 裡又指應該給每個變數都各自有一個var、應使用`===`代替`==`做比較。各項定義也有原因，也很值得學習，尤其是讓初學者養成良好習慣。

###分類
世界有太多不同的語言，也有太多不同的公約。下列為公約規則的[常見分類](https://en.wikipedia.org/wiki/Coding_conventions#Common_conventions)。

- 註解公約 (Comment conventions)
- 縮排公約 (Indent style conventions)
- 長度公約 (Line length conventions)
- 命名公約 (Naming conventions)
- 編程慣例 (Programming practices)
- 編程原則 (Programming principles)
- 經驗法則 (Programming rules of thumb)
- 風格約定 (Programming style conventions)

本文就抓幾個重要的來討論一下。

###縮排公約
[縮排](https://en.wikipedia.org/wiki/Indent_style)就是指我們常常直接把程式碼貼在Facebook 然後消失了的東西。為了解釋為什麼縮排那麼重要，請拿出隨便一份千行程式碼，然後全選所有文字並按下十次`Shift+Tab`把所有縮排滅掉。再看一次這份程式碼，也許你也會有想把作者滅掉的感覺。

當然不是有縮排就等於好，縮不縮得當，排要排公整，不然其實沒什麼意思。比較常見的就這兩種：
``` C
while (x == y)
{
    something();
    somethingelse();
}
```
``` C
while (x == y) {
    something();
    somethingelse();
}
```

###命名公約
[命名](https://en.wikipedia.org/wiki/Naming_convention_(programming))除了最基本的不要用`abc`也不要簡化到連自己都看不懂以外，請統一地命名所有物件和變數。例如用駝峰式大小寫(Camel Case)應該全部都用駝峰式大小寫。又例如命名按鈕不要一個叫`btnSave`另一個卻叫`load_ButTON`。有系統地使用統一的名稱，可以快速找到各個變數，也減少寫錯的機會和除錯的難度。

###個人風格
有了一套良好習慣後，也可以在公約慣例中衍生出一套自己的習慣。有一套好的習慣非常有幫助。舉例說，一個萬行程式碼的檔案，要如何知道一個namespace 第三層第四個大括號的開端和結尾在哪？痛苦吧。為解決這種問題，稍有經驗的軟體工程師都會有備而戰，在問題發生前未雨綢繆。如筆者受VB 風影響，習慣在比較長的 for 或function 寫一句註解 `// end function proceesUserRequest`。大家都有自己的方法，通過社群，前人累積的經驗總有些道理，就先別嫌棄試試看吧。


###參考
更多[程式碼風格](https://en.wikibooks.org/wiki/Computer_Programming/Coding_Style)規則

檢查 JavaScript 品質的 [jsLint](http://www.jslint.com/)
